
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}

    <div class="divLogin col-md-4 offset-md-4">
        <div class="divtitle">
            <h2>e-Registration Card System</h2>
        </div>
        <div class="container">
            <label for="SystemID"><b>System ID</b></label>
            <input type="text" id="SystemID" placeholder="Enter System ID" name="SystemID" required>

            <label for="PmsID"><b>Pms ID</b></label>
            <input type="text" id="PmsID" placeholder="Enter Pms ID" name="PmsID" required>

            <label for="PmsPassword"><b>Pms Password</b></label>
            <input type="password" id="PmsPassword" placeholder="Enter Pms Password" name="PmsPassword" required>

            <label for="HotelCode"><b>Hotel Code</b></label>
            <input type="text" id="HotelCode" placeholder="Enter Hotel Code" name="HotelCode" required>

            <label for="MachineNo"><b>Machine No.</b></label>
            <input type="text" id="MachineNo" placeholder="Enter Machine No." name="MachineNo" required>

            <button type="submit" id="btnlogin">Login</button>
        </div>
    </div>

    @section Scripts{
    <script src="~/Scripts/Common.js"></script>
    <script src="~/Scripts/jquery-3.5.1.js"></script>
    <script>
        $(document).ready(function () {
            $("#btnlogin").click(function () {
                Login();
             });
        });

        function Login() {
            var result = CalltoApiController("/api/CardAPI/ValidateLogin", { SystemID: $("#SystemID").val(), PmsID: $("#PmsID").val(), PmsPassword: $("#PmsPassword").val(), MachineNo: $("#MachineNo").val(), HotelCode: $("#HotelCode").val() });
            alert("go");
            if (result.length > 0) {

                var cardInfo = result[0].systemid + '_' + result[0].pmsid + '_' + result[0].pmspassword + '_' + result[0].machineno + '_' + result[0].hotel_code;
                        $.post('@Url.Action("CreateSession", "Card")',
                            { key: "CardInfo", value: cardInfo }, function (data) {

                                location.href = '@Url.Action("CardRegisterPage", "Card")';
                            });
                }
                else {
                    $("#SystemID").focus();
                }
        }
    </script>
    }

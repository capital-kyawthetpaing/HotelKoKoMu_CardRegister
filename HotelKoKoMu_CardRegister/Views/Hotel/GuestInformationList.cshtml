
@{
    ViewBag.Title = "GuestInformationList";    
    Layout = "~/Views/Shared/_CardRegisterLayout.cshtml";
}

<div class="row">
    <div class="table-responsive">
        <table id="tblGuestList" border="1">
            <thead>
                <tr>
                    <th>HotelCode</th>
                    <th>ReservationNo</th>
                    <th>RoomNo</th>
                    <th>SystemDate</th>
                    <th>GuestName</th>
                    <th>KanaName</th>
                    <th>ZipCode</th>
                    <th>Tel</th>
                    <th>Address1</th>
                    <th>Address2</th>
                    <th>Company</th>
                    <th>Nationality</th>
                    <th>PassportNo</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            var CardRegisterInfo = { SystemID: $("#lblsystemid").text(), PmsID: $("#lblPmsId").text(), PmsPassword: $("#lblPmsPassword").text(), HotelCode: $("#lblhotelCode").text(), MachineNo: $("#lblmachineno").text() };
            var result = CalltoApiController('@Url.Action("getRegistrationCardData", "api/CardAPI/")', CardRegisterInfo);
            var response = result.Success;
            alert(response);
            if (response != undefined) {
                BindGuestInformationTable(response);
            }
        });

        function BindGuestInformationTable(response) {

            table = $('#tblGuestList').DataTable({

                data: JSON.parse(response),
                "bFilter": false,
                "bLengthChange": false,
                "bInfo": false,
                "ordering": false,
                destroy: true,
                scrollX: true,
                paging: false,
                "columns": [
                    { "data": "hotel_code", orderable: false },
                    { "data": "reservationno", orderable: false },
                    { "data": "roomno", orderable: false },
                    { "data": "systemdate", orderable: false },
                    { "data": "guestname_text", orderable: false},
                    { "data": "kananame_text", orderable: false },
                    { "data": "zipcode_text", orderable: false },
                    { "data": "tel_text", orderable: false },
                    { "data": "address1_text", orderable: false },
                    { "data": "address2_text", orderable: false},
                    { "data": "company_text", orderable: false },
                    { "data": "nationality_text", orderable: false},
                    { "data": "passportno_text", orderable: false },
                ]
            });
        }

    </script>
}



@{
    var controllerName = this.ViewContext.RouteData.Values["controller"].ToString();
    var actionName = this.ViewContext.RouteData.Values["action"].ToString();
    var lang = HttpContext.Current.Request.Cookies["culture"].Value;
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <script src="@Url.Content("~/Scripts/jquery-3.5.1.js")"></script>
    <link rel="stylesheet" href="@Url.Content("~/Content/bootstrap.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/Content/Global.css")" />
</head>
<body>
   
    <div class="container" style="margin-top:10px;">
        <div style="padding:5px">
            @{
            var multiLanguageList = new List<SelectListItem>();
            foreach (var i in HotelKoKoMu_CardRegister.MultiLanguages.AvailableLanguages)
            {
                multiLanguageList.Add(new SelectListItem { Text = i.LanguageFullName, Value = i.LanguageCultureName });
            }
            @Html.DropDownList("MultiLanguage", multiLanguageList)
            }
        </div>
        <div class="card">
            <h5 class="card-header text-center" style="margin-top: 15px;border-radius: unset; background-color: #1b5696">@HotelKoKoMu_CardRegister.Resources.Resources.Title</h5>
            <div class="card-body">
                @RenderBody()
            </div>
        </div>


    </div>
</body>
</html>
@RenderSection("scripts", required: false)
<script>
    $(document).ready(function () {
        
        if ('@lang' != null) {
            $('#MultiLanguage').val('@lang');
        }
        else {
            $('#MultiLanguage').val('').trigger("change");
        }

        $("#MultiLanguage").change(function () {
           
            if ($(this).val() != "") {
                 $.post('@Url.Action("ChangeLanguage", "Card")',{ key: "lang", value: $(this).val() }, function (data) {
                                location.href = '@Url.Action(actionName, controllerName)';
                 });
            }
        })
    })
</script>
